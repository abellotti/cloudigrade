REST API Example Usage
======================

This document summarizes some examples of the cloudigrade REST API.

..
    This document can be regenerated by a developer using the following
    make target from the root directory of a sandbox environment having
    database ports forwarded locally:

    make docs-api-examples

    Please note that this is a destructive operation because building the data
    for the document requires creating, updating, and deleting many objects.

Examples here use the ``http`` command from
`httpie <https://httpie.org/>`_. If you want to follow along with these
exact commands, you may need to ``brew install httpie`` or
``pip install httpie`` first.

These examples also assume you are running cloudigrade on
``localhost:8080`` either via ``docker-compose`` or Django’s built-in
``runserver`` command and that you have correctly configured
cloudigrade’s environment with appropriate variables to allow it to talk
to the various clouds (e.g. ``AWS_ACCESS_KEY_ID``).

Authorization
-------------

The v2 API is authenticated with 3scale. In order to authenticate a `HTTP_X_RH_IDENTITY` header must be included in the request.
This header must be the base64 encoded version of:


.. code:: json

    {
        "identity": {
            "account_number": "1337",
            "user": {
                "is_org_admin": true
            }
        }
    }

.. code:: bash

    HTTP_X_RH_IDENTITY=eyJpZGVudGl0eSI6IHsiYWNjb3VudF9udW1iZXIiOiAiMTMzNyIsICJ1c2VyIjogeyJpc19vcmdfYWRtaW4iOiB0cnVlfX19

Overview
--------

The following resource paths are currently available:

-  ``/api/v2/accounts/`` returns accounts data
-  ``/api/v2/instances/`` returns instances data
-  ``/api/v2/images/`` returns images data
-  ``/api/v2/sysconfig/`` returns sysconfig data
-  ``/api/v2/concurrent/`` returns concurrency data


User Setup
------------------

When accessing any endpoint with the HTTP_X_RH_IDENTITY header,
if the user found in the header does not exist, it will be created.
Users can also be created using Django Admin.


Customer Account Setup
----------------------

Create an AWS account
~~~~~~~~~~~~~~~~~~~~~

This request may take a few seconds because of multiple round-trip calls
to the AWS APIs for each region. The "name" attribute is required and has a
maximum supported length of 256 characters. The "platform_authentication_id",
"platform_application_id", "platform_endpoint_id", and "platform_source_id"
attributes are all required and should be integers.

Request:

.. code:: bash

    http post localhost:8080/api/cloudigrade/v2/accounts/ "X-RH-IDENTITY:${HTTP_X_RH_IDENTITY}" \
        cloud_type="aws" \
        account_arn="arn:aws:iam::310741536438:role/role-for-cloudigrade" \
        name="yet another account" \
        platform_authentication_id="5409" \
        platform_application_id="7735" \
        platform_source_id="9171"

Response:

::

    HTTP/1.1 201 Created
    Allow: GET, POST, HEAD, OPTIONS
    Content-Length: 501
    Content-Type: application/json
    Vary: Accept
    X-CLOUDIGRADE-REQUEST-ID: ccca1ddc-4122-4785-91a6-a5581ddf2747
    X-Content-Type-Options: nosniff
    X-Frame-Options: DENY

    {
        "account_id": 4,
        "cloud_type": "aws",
        "content_object": {
            "account_arn": "arn:aws:iam::310741536438:role/role-for-cloudigrade",
            "aws_account_id": "310741536438",
            "aws_cloud_account_id": 3,
            "created_at": "2020-05-18T13:51:59.722367Z",
            "updated_at": "2020-05-18T13:51:59.722367Z"
        },
        "created_at": "2020-05-18T13:51:59.722367Z",
        "is_enabled": true,
        "name": "yet another account",
        "platform_application_id": 7735,
        "platform_authentication_id": 5409,
        "platform_source_id": 9171,
        "updated_at": "2020-05-18T13:51:59.722367Z",
        "user_id": 2
    }

If you attempt to create an AWS account for an ARN that is already in
the system, you should get a 400 error.

Request:

.. code:: bash

    http post localhost:8080/api/cloudigrade/v2/accounts/ "X-RH-IDENTITY:${HTTP_X_RH_IDENTITY}" \
        cloud_type="aws" \
        account_arn="arn:aws:iam::310741536438:role/role-for-cloudigrade" \
        name="but this account already exists" \
        platform_authentication_id="3350" \
        platform_application_id="9052" \
        platform_source_id="7815"

Response:

::

    HTTP/1.1 400 Bad Request
    Allow: GET, POST, HEAD, OPTIONS
    Content-Length: 93
    Content-Type: application/json
    Vary: Accept
    X-CLOUDIGRADE-REQUEST-ID: 39210a4c-03c2-4872-94dc-29cc26dea775
    X-Content-Type-Options: nosniff
    X-Frame-Options: DENY

    {
        "account_arn": "Could not set up cloud metering. Please contact support. Error code CG1001."
    }




Create an Azure account
~~~~~~~~~~~~~~~~~~~~~
The "name" attribute is required and has a maximum supported length of 256 characters.
The "platform_authentication_id", "platform_application_id", "platform_endpoint_id",
and "platform_source_id" attributes are all required and should be integers.

Request:

.. code:: bash

    http post localhost:8080/api/cloudigrade/v2/accounts/ "X-RH-IDENTITY:${HTTP_X_RH_IDENTITY}" \
        cloud_type="azure" \
        subscription_id="fd13bf6d-e7c1-444a-89e6-996ad3f87bd8" \
        tenant_id="f75f8161-e687-4008-9217-adcbce84c299" \
        name="it's an azure account" \
        platform_authentication_id="8989" \
        platform_application_id="230" \
        platform_source_id="1528"

Response:

::

    HTTP/1.1 201 Created
    Allow: GET, POST, HEAD, OPTIONS
    Content-Length: 514
    Content-Type: application/json
    Vary: Accept
    X-CLOUDIGRADE-REQUEST-ID: 81914155-107e-4c43-b1d3-4dc56862cf62
    X-Content-Type-Options: nosniff
    X-Frame-Options: DENY

    {
        "account_id": 5,
        "cloud_type": "azure",
        "content_object": {
            "azure_cloud_account_id": 2,
            "created_at": "2020-05-18T13:51:59.722367Z",
            "subscription_id": "fd13bf6d-e7c1-444a-89e6-996ad3f87bd8",
            "tenant_id": "f75f8161-e687-4008-9217-adcbce84c299",
            "updated_at": "2020-05-18T13:51:59.722367Z"
        },
        "created_at": "2020-05-18T13:51:59.722367Z",
        "is_enabled": true,
        "name": "it's an azure account",
        "platform_application_id": 230,
        "platform_authentication_id": 8989,
        "platform_source_id": 1528,
        "updated_at": "2020-05-18T13:51:59.722367Z",
        "user_id": 2
    }



Customer Account Info
---------------------

List all accounts
~~~~~~~~~~~~~~~~~

Request:

.. code:: bash

    http localhost:8080/api/cloudigrade/v2/accounts/ "X-RH-IDENTITY:${HTTP_X_RH_IDENTITY}"

Response:

::

    HTTP/1.1 200 OK
    Allow: GET, POST, HEAD, OPTIONS
    Content-Length: 2213
    Content-Type: application/json
    Vary: Accept
    X-CLOUDIGRADE-REQUEST-ID: 0f29a4ef-203d-49ba-9455-0ef1097b6a24
    X-Content-Type-Options: nosniff
    X-Frame-Options: DENY

    {
        "data": [
            {
                "account_id": 5,
                "cloud_type": "azure",
                "content_object": {
                    "azure_cloud_account_id": 2,
                    "created_at": "2020-05-18T13:51:59.722367Z",
                    "subscription_id": "fd13bf6d-e7c1-444a-89e6-996ad3f87bd8",
                    "tenant_id": "f75f8161-e687-4008-9217-adcbce84c299",
                    "updated_at": "2020-05-18T13:51:59.722367Z"
                },
                "created_at": "2020-05-18T13:51:59.722367Z",
                "is_enabled": true,
                "name": "it's an azure account",
                "platform_application_id": 230,
                "platform_authentication_id": 8989,
                "platform_source_id": 1528,
                "updated_at": "2020-05-18T13:51:59.722367Z",
                "user_id": 2
            },
            {
                "account_id": 4,
                "cloud_type": "aws",
                "content_object": {
                    "account_arn": "arn:aws:iam::310741536438:role/role-for-cloudigrade",
                    "aws_account_id": "310741536438",
                    "aws_cloud_account_id": 3,
                    "created_at": "2020-05-18T13:51:59.722367Z",
                    "updated_at": "2020-05-18T13:51:59.722367Z"
                },
                "created_at": "2020-05-18T13:51:59.722367Z",
                "is_enabled": true,
                "name": "yet another account",
                "platform_application_id": 7735,
                "platform_authentication_id": 5409,
                "platform_source_id": 9171,
                "updated_at": "2020-05-18T13:51:59.722367Z",
                "user_id": 2
            },
            {
                "account_id": 3,
                "cloud_type": "azure",
                "content_object": {
                    "azure_cloud_account_id": 1,
                    "created_at": "2020-05-04T00:00:00Z",
                    "subscription_id": "383dcdf7-24cd-4b72-9714-fe51e082ffee",
                    "tenant_id": "7d1b4d8d-4ab4-4f8c-95d0-ec8a34f6cc9a",
                    "updated_at": "2020-05-18T13:51:59.722367Z"
                },
                "created_at": "2020-05-04T00:00:00Z",
                "is_enabled": true,
                "name": "meh account",
                "platform_application_id": 4969,
                "platform_authentication_id": 6634,
                "platform_source_id": 7808,
                "updated_at": "2020-05-18T13:51:59.722367Z",
                "user_id": 2
            },
            {
                "account_id": 2,
                "cloud_type": "aws",
                "content_object": {
                    "account_arn": "arn:aws:iam::636708824399:role/role-for-cloudigrade",
                    "aws_account_id": "636708824399",
                    "aws_cloud_account_id": 2,
                    "created_at": "2020-05-04T00:00:00Z",
                    "updated_at": "2020-05-18T13:51:59.722367Z"
                },
                "created_at": "2020-05-04T00:00:00Z",
                "is_enabled": true,
                "name": "greatest account ever",
                "platform_application_id": 8376,
                "platform_authentication_id": 4242,
                "platform_source_id": 7961,
                "updated_at": "2020-05-18T13:51:59.722367Z",
                "user_id": 2
            }
        ],
        "links": {
            "first": "/api/cloudigrade/api/cloudigrade/v2/accounts/?limit=10&offset=0",
            "last": "/api/cloudigrade/api/cloudigrade/v2/accounts/?limit=10&offset=0",
            "next": null,
            "previous": null
        },
        "meta": {
            "count": 4
        }
    }


Retrieve a specific account
~~~~~~~~~~~~~~~~~~~~~~~~~~~

Request:

.. code:: bash

    http localhost:8080/api/cloudigrade/v2/accounts/4/ "X-RH-IDENTITY:${HTTP_X_RH_IDENTITY}"

Response:

::

    HTTP/1.1 200 OK
    Allow: GET, PUT, PATCH, DELETE, HEAD, OPTIONS
    Content-Length: 501
    Content-Type: application/json
    Vary: Accept
    X-CLOUDIGRADE-REQUEST-ID: 7de3dd9a-b714-4cb2-a6cf-fc5a69099c77
    X-Content-Type-Options: nosniff
    X-Frame-Options: DENY

    {
        "account_id": 4,
        "cloud_type": "aws",
        "content_object": {
            "account_arn": "arn:aws:iam::310741536438:role/role-for-cloudigrade",
            "aws_account_id": "310741536438",
            "aws_cloud_account_id": 3,
            "created_at": "2020-05-18T13:51:59.722367Z",
            "updated_at": "2020-05-18T13:51:59.722367Z"
        },
        "created_at": "2020-05-18T13:51:59.722367Z",
        "is_enabled": true,
        "name": "yet another account",
        "platform_application_id": 7735,
        "platform_authentication_id": 5409,
        "platform_source_id": 9171,
        "updated_at": "2020-05-18T13:51:59.722367Z",
        "user_id": 2
    }


Update a specific account
~~~~~~~~~~~~~~~~~~~~~~~~~

You can update the account object via either HTTP PATCH or HTTP PUT. All
updates require you to specify the "resourcetype".

At the time of this writing, only the "name" property can be changed on the
account object.

Request:

.. code:: bash

    http patch localhost:8080/api/cloudigrade/v2/accounts/4/ "X-RH-IDENTITY:${HTTP_X_RH_IDENTITY}" \
        name="name updated using PATCH"

Response:

::

    HTTP/1.1 200 OK
    Allow: GET, PUT, PATCH, DELETE, HEAD, OPTIONS
    Content-Length: 506
    Content-Type: application/json
    Vary: Accept
    X-CLOUDIGRADE-REQUEST-ID: 62750c19-78c7-4605-8899-9e21a1521ab3
    X-Content-Type-Options: nosniff
    X-Frame-Options: DENY

    {
        "account_id": 4,
        "cloud_type": "aws",
        "content_object": {
            "account_arn": "arn:aws:iam::310741536438:role/role-for-cloudigrade",
            "aws_account_id": "310741536438",
            "aws_cloud_account_id": 3,
            "created_at": "2020-05-18T13:51:59.722367Z",
            "updated_at": "2020-05-18T13:51:59.722367Z"
        },
        "created_at": "2020-05-18T13:51:59.722367Z",
        "is_enabled": true,
        "name": "name updated using PATCH",
        "platform_application_id": 7735,
        "platform_authentication_id": 5409,
        "platform_source_id": 9171,
        "updated_at": "2020-05-18T13:51:59.722367Z",
        "user_id": 2
    }

Because PUT is intended to replace objects, it must include all potentially
writable fields, which includes "name" and "account_arn".

Request:

.. code:: bash

    http put localhost:8080/api/cloudigrade/v2/accounts/4/ "X-RH-IDENTITY:${HTTP_X_RH_IDENTITY}" \
        cloud_type="aws" \
        account_arn="arn:aws:iam::310741536438:role/role-for-cloudigrade" \
        name="name updated using PUT" \
        platform_authentication_id="5409" \
        platform_application_id="7735" \
        platform_source_id="9171"

Response:

::

    HTTP/1.1 200 OK
    Allow: GET, PUT, PATCH, DELETE, HEAD, OPTIONS
    Content-Length: 572
    Content-Type: application/json
    Vary: Accept
    X-CLOUDIGRADE-REQUEST-ID: 8ca65831-62c8-46c7-bd1c-e10f9cb3779d
    X-Content-Type-Options: nosniff
    X-Frame-Options: DENY

    {
        "account_arn": "arn:aws:iam::310741536438:role/role-for-cloudigrade",
        "account_id": 4,
        "cloud_type": "aws",
        "content_object": {
            "account_arn": "arn:aws:iam::310741536438:role/role-for-cloudigrade",
            "aws_account_id": "310741536438",
            "aws_cloud_account_id": 3,
            "created_at": "2020-05-18T13:51:59.722367Z",
            "updated_at": "2020-05-18T13:51:59.722367Z"
        },
        "created_at": "2020-05-18T13:51:59.722367Z",
        "is_enabled": true,
        "name": "name updated using PUT",
        "platform_application_id": 7735,
        "platform_authentication_id": 5409,
        "platform_source_id": 9171,
        "updated_at": "2020-05-18T13:51:59.722367Z",
        "user_id": 2
    }

You cannot change the ARN via PUT or PATCH.

Request:

.. code:: bash

    http patch localhost:8080/api/cloudigrade/v2/accounts/4/ "X-RH-IDENTITY:${HTTP_X_RH_IDENTITY}" \
        account_arn="arn:aws:iam::999999999999:role/role-for-cloudigrade"

Response:

::

    HTTP/1.1 400 Bad Request
    Allow: GET, PUT, PATCH, DELETE, HEAD, OPTIONS
    Content-Length: 50
    Content-Type: application/json
    Vary: Accept
    X-CLOUDIGRADE-REQUEST-ID: a1ef56a6-1ff8-4eb6-9f4b-c9d920f5e963
    X-Content-Type-Options: nosniff
    X-Frame-Options: DENY

    {
        "account_arn": [
            "You cannot update account_arn."
        ]
    }


Instance Info
-------------

List all instances
~~~~~~~~~~~~~~~~~~

Request:

.. code:: bash

    http localhost:8080/api/cloudigrade/v2/instances/ "X-RH-IDENTITY:${HTTP_X_RH_IDENTITY}"

Response:

::

    HTTP/1.1 200 OK
    Allow: GET, HEAD, OPTIONS
    Content-Length: 2649
    Content-Type: application/json
    Vary: Accept
    X-CLOUDIGRADE-REQUEST-ID: cc4beabe-dff5-4efb-8f1f-84dcc9fe3009
    X-Content-Type-Options: nosniff
    X-Frame-Options: DENY

    {
        "data": [
            {
                "cloud_account_id": 3,
                "cloud_type": "azure",
                "content_object": {
                    "azure_instance_id": 1,
                    "created_at": "2020-05-18T13:51:59.722367Z",
                    "region": "EAST US 2 EUAP",
                    "resource_id": "/subscriptions/770a9819-b3fc-4433-825b-e7bb78d6e6eb/resourceGroups/group/providers/Microsoft.Compute/virtualMachines/through",
                    "updated_at": "2020-05-18T13:51:59.722367Z"
                },
                "created_at": "2020-05-18T13:51:59.722367Z",
                "instance_id": 5,
                "machine_image_id": 5,
                "updated_at": "2020-05-18T13:51:59.722367Z"
            },
            {
                "cloud_account_id": 3,
                "cloud_type": "azure",
                "content_object": {
                    "azure_instance_id": 2,
                    "created_at": "2020-05-18T13:51:59.722367Z",
                    "region": "East US",
                    "resource_id": "/subscriptions/98eb71aa-2c03-48ae-a8e6-91df82ea4fa6/resourceGroups/cause/providers/Microsoft.Compute/virtualMachines/believe",
                    "updated_at": "2020-05-18T13:51:59.722367Z"
                },
                "created_at": "2020-05-18T13:51:59.722367Z",
                "instance_id": 6,
                "machine_image_id": 6,
                "updated_at": "2020-05-18T13:51:59.722367Z"
            },
            {
                "cloud_account_id": 3,
                "cloud_type": "azure",
                "content_object": {
                    "azure_instance_id": 3,
                    "created_at": "2020-05-18T13:51:59.722367Z",
                    "region": "South Central US",
                    "resource_id": "/subscriptions/223dc3f4-7b5a-4c49-ac5b-97f2e4a2da9e/resourceGroups/mouth/providers/Microsoft.Compute/virtualMachines/relate",
                    "updated_at": "2020-05-18T13:51:59.722367Z"
                },
                "created_at": "2020-05-18T13:51:59.722367Z",
                "instance_id": 7,
                "machine_image_id": 7,
                "updated_at": "2020-05-18T13:51:59.722367Z"
            },
            {
                "cloud_account_id": 2,
                "cloud_type": "aws",
                "content_object": {
                    "aws_instance_id": 2,
                    "created_at": "2020-05-18T13:51:59.722367Z",
                    "ec2_instance_id": "i-9e2ca7956518f2244",
                    "region": "us-east-2",
                    "updated_at": "2020-05-18T13:51:59.722367Z"
                },
                "created_at": "2020-05-18T13:51:59.722367Z",
                "instance_id": 2,
                "machine_image_id": 2,
                "updated_at": "2020-05-18T13:51:59.722367Z"
            },
            {
                "cloud_account_id": 2,
                "cloud_type": "aws",
                "content_object": {
                    "aws_instance_id": 3,
                    "created_at": "2020-05-18T13:51:59.722367Z",
                    "ec2_instance_id": "i-fb2a3fa670837b5ad",
                    "region": "us-east-1",
                    "updated_at": "2020-05-18T13:51:59.722367Z"
                },
                "created_at": "2020-05-18T13:51:59.722367Z",
                "instance_id": 3,
                "machine_image_id": 3,
                "updated_at": "2020-05-18T13:51:59.722367Z"
            },
            {
                "cloud_account_id": 2,
                "cloud_type": "aws",
                "content_object": {
                    "aws_instance_id": 4,
                    "created_at": "2020-05-18T13:51:59.722367Z",
                    "ec2_instance_id": "i-3c2b310653f610d38",
                    "region": "ca-central-1",
                    "updated_at": "2020-05-18T13:51:59.722367Z"
                },
                "created_at": "2020-05-18T13:51:59.722367Z",
                "instance_id": 4,
                "machine_image_id": 4,
                "updated_at": "2020-05-18T13:51:59.722367Z"
            }
        ],
        "links": {
            "first": "/api/cloudigrade/api/cloudigrade/v2/instances/?limit=10&offset=0",
            "last": "/api/cloudigrade/api/cloudigrade/v2/instances/?limit=10&offset=0",
            "next": null,
            "previous": null
        },
        "meta": {
            "count": 6
        }
    }


Retrieve a specific instance
~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Request:

.. code:: bash

    http localhost:8080/api/cloudigrade/v2/instances/2/ "X-RH-IDENTITY:${HTTP_X_RH_IDENTITY}"

Response:

::

    HTTP/1.1 200 OK
    Allow: GET, HEAD, OPTIONS
    Content-Length: 350
    Content-Type: application/json
    Vary: Accept
    X-CLOUDIGRADE-REQUEST-ID: c864715f-c130-445b-8aa1-13f40be6ef0a
    X-Content-Type-Options: nosniff
    X-Frame-Options: DENY

    {
        "cloud_account_id": 2,
        "cloud_type": "aws",
        "content_object": {
            "aws_instance_id": 2,
            "created_at": "2020-05-18T13:51:59.722367Z",
            "ec2_instance_id": "i-9e2ca7956518f2244",
            "region": "us-east-2",
            "updated_at": "2020-05-18T13:51:59.722367Z"
        },
        "created_at": "2020-05-18T13:51:59.722367Z",
        "instance_id": 2,
        "machine_image_id": 2,
        "updated_at": "2020-05-18T13:51:59.722367Z"
    }


Filtering instances
~~~~~~~~~~~~~~~~~~~

You may include an optional "user_id" query string argument to filter results
down to a specific user.

Request:

.. code:: bash

    http localhost:8080/api/cloudigrade/v2/instances/ "X-RH-IDENTITY:${HTTP_X_RH_IDENTITY}" \
        v2_user_id=="1"

Response:

::

    HTTP/1.1 200 OK
    Allow: GET, HEAD, OPTIONS
    Content-Length: 3026
    Content-Type: application/json
    Vary: Accept
    X-CLOUDIGRADE-REQUEST-ID: 7c41e606-f185-4a91-92e0-373a17c6d1e2
    X-Content-Type-Options: nosniff
    X-Frame-Options: DENY

    {
        "data": [
            {
                "cloud_account_id": 1,
                "cloud_type": "aws",
                "content_object": {
                    "aws_instance_id": 1,
                    "created_at": "2020-05-18T13:51:59.722367Z",
                    "ec2_instance_id": "i-9fb6494384932af3b",
                    "region": "us-east-1",
                    "updated_at": "2020-05-18T13:51:59.722367Z"
                },
                "created_at": "2020-05-18T13:51:59.722367Z",
                "instance_id": 1,
                "machine_image_id": 1,
                "updated_at": "2020-05-18T13:51:59.722367Z"
            },
            {
                "cloud_account_id": 2,
                "cloud_type": "aws",
                "content_object": {
                    "aws_instance_id": 2,
                    "created_at": "2020-05-18T13:51:59.722367Z",
                    "ec2_instance_id": "i-9e2ca7956518f2244",
                    "region": "us-east-2",
                    "updated_at": "2020-05-18T13:51:59.722367Z"
                },
                "created_at": "2020-05-18T13:51:59.722367Z",
                "instance_id": 2,
                "machine_image_id": 2,
                "updated_at": "2020-05-18T13:51:59.722367Z"
            },
            {
                "cloud_account_id": 2,
                "cloud_type": "aws",
                "content_object": {
                    "aws_instance_id": 3,
                    "created_at": "2020-05-18T13:51:59.722367Z",
                    "ec2_instance_id": "i-fb2a3fa670837b5ad",
                    "region": "us-east-1",
                    "updated_at": "2020-05-18T13:51:59.722367Z"
                },
                "created_at": "2020-05-18T13:51:59.722367Z",
                "instance_id": 3,
                "machine_image_id": 3,
                "updated_at": "2020-05-18T13:51:59.722367Z"
            },
            {
                "cloud_account_id": 2,
                "cloud_type": "aws",
                "content_object": {
                    "aws_instance_id": 4,
                    "created_at": "2020-05-18T13:51:59.722367Z",
                    "ec2_instance_id": "i-3c2b310653f610d38",
                    "region": "ca-central-1",
                    "updated_at": "2020-05-18T13:51:59.722367Z"
                },
                "created_at": "2020-05-18T13:51:59.722367Z",
                "instance_id": 4,
                "machine_image_id": 4,
                "updated_at": "2020-05-18T13:51:59.722367Z"
            },
            {
                "cloud_account_id": 3,
                "cloud_type": "azure",
                "content_object": {
                    "azure_instance_id": 1,
                    "created_at": "2020-05-18T13:51:59.722367Z",
                    "region": "EAST US 2 EUAP",
                    "resource_id": "/subscriptions/770a9819-b3fc-4433-825b-e7bb78d6e6eb/resourceGroups/group/providers/Microsoft.Compute/virtualMachines/through",
                    "updated_at": "2020-05-18T13:51:59.722367Z"
                },
                "created_at": "2020-05-18T13:51:59.722367Z",
                "instance_id": 5,
                "machine_image_id": 5,
                "updated_at": "2020-05-18T13:51:59.722367Z"
            },
            {
                "cloud_account_id": 3,
                "cloud_type": "azure",
                "content_object": {
                    "azure_instance_id": 2,
                    "created_at": "2020-05-18T13:51:59.722367Z",
                    "region": "East US",
                    "resource_id": "/subscriptions/98eb71aa-2c03-48ae-a8e6-91df82ea4fa6/resourceGroups/cause/providers/Microsoft.Compute/virtualMachines/believe",
                    "updated_at": "2020-05-18T13:51:59.722367Z"
                },
                "created_at": "2020-05-18T13:51:59.722367Z",
                "instance_id": 6,
                "machine_image_id": 6,
                "updated_at": "2020-05-18T13:51:59.722367Z"
            },
            {
                "cloud_account_id": 3,
                "cloud_type": "azure",
                "content_object": {
                    "azure_instance_id": 3,
                    "created_at": "2020-05-18T13:51:59.722367Z",
                    "region": "South Central US",
                    "resource_id": "/subscriptions/223dc3f4-7b5a-4c49-ac5b-97f2e4a2da9e/resourceGroups/mouth/providers/Microsoft.Compute/virtualMachines/relate",
                    "updated_at": "2020-05-18T13:51:59.722367Z"
                },
                "created_at": "2020-05-18T13:51:59.722367Z",
                "instance_id": 7,
                "machine_image_id": 7,
                "updated_at": "2020-05-18T13:51:59.722367Z"
            }
        ],
        "links": {
            "first": "/api/cloudigrade/api/cloudigrade/v2/instances/?limit=10&offset=0&v2_user_id=1",
            "last": "/api/cloudigrade/api/cloudigrade/v2/instances/?limit=10&offset=0&v2_user_id=1",
            "next": null,
            "previous": null
        },
        "meta": {
            "count": 7
        }
    }


You may also include an optional "running_since" query string argument to filter for only
instances that have been running uninterrupted since the given time.

Request:

.. code:: bash

    http localhost:8080/api/cloudigrade/v2/instances/ "X-RH-IDENTITY:${HTTP_X_RH_IDENTITY}" \
        running_since=="2020-05-18 13:51:59.722367+00:00"

Response:

::

    HTTP/1.1 200 OK
    Allow: GET, HEAD, OPTIONS
    Content-Length: 2756
    Content-Type: application/json
    Vary: Accept
    X-CLOUDIGRADE-REQUEST-ID: e3a0c780-b286-4b81-8ef2-1d256de4906c
    X-Content-Type-Options: nosniff
    X-Frame-Options: DENY

    {
        "data": [
            {
                "cloud_account_id": 1,
                "cloud_type": "aws",
                "content_object": {
                    "aws_instance_id": 1,
                    "created_at": "2020-05-18T13:51:59.722367Z",
                    "ec2_instance_id": "i-9fb6494384932af3b",
                    "region": "us-east-1",
                    "updated_at": "2020-05-18T13:51:59.722367Z"
                },
                "created_at": "2020-05-18T13:51:59.722367Z",
                "instance_id": 1,
                "machine_image_id": 1,
                "updated_at": "2020-05-18T13:51:59.722367Z"
            },
            {
                "cloud_account_id": 2,
                "cloud_type": "aws",
                "content_object": {
                    "aws_instance_id": 2,
                    "created_at": "2020-05-18T13:51:59.722367Z",
                    "ec2_instance_id": "i-9e2ca7956518f2244",
                    "region": "us-east-2",
                    "updated_at": "2020-05-18T13:51:59.722367Z"
                },
                "created_at": "2020-05-18T13:51:59.722367Z",
                "instance_id": 2,
                "machine_image_id": 2,
                "updated_at": "2020-05-18T13:51:59.722367Z"
            },
            {
                "cloud_account_id": 2,
                "cloud_type": "aws",
                "content_object": {
                    "aws_instance_id": 3,
                    "created_at": "2020-05-18T13:51:59.722367Z",
                    "ec2_instance_id": "i-fb2a3fa670837b5ad",
                    "region": "us-east-1",
                    "updated_at": "2020-05-18T13:51:59.722367Z"
                },
                "created_at": "2020-05-18T13:51:59.722367Z",
                "instance_id": 3,
                "machine_image_id": 3,
                "updated_at": "2020-05-18T13:51:59.722367Z"
            },
            {
                "cloud_account_id": 3,
                "cloud_type": "azure",
                "content_object": {
                    "azure_instance_id": 1,
                    "created_at": "2020-05-18T13:51:59.722367Z",
                    "region": "EAST US 2 EUAP",
                    "resource_id": "/subscriptions/770a9819-b3fc-4433-825b-e7bb78d6e6eb/resourceGroups/group/providers/Microsoft.Compute/virtualMachines/through",
                    "updated_at": "2020-05-18T13:51:59.722367Z"
                },
                "created_at": "2020-05-18T13:51:59.722367Z",
                "instance_id": 5,
                "machine_image_id": 5,
                "updated_at": "2020-05-18T13:51:59.722367Z"
            },
            {
                "cloud_account_id": 3,
                "cloud_type": "azure",
                "content_object": {
                    "azure_instance_id": 2,
                    "created_at": "2020-05-18T13:51:59.722367Z",
                    "region": "East US",
                    "resource_id": "/subscriptions/98eb71aa-2c03-48ae-a8e6-91df82ea4fa6/resourceGroups/cause/providers/Microsoft.Compute/virtualMachines/believe",
                    "updated_at": "2020-05-18T13:51:59.722367Z"
                },
                "created_at": "2020-05-18T13:51:59.722367Z",
                "instance_id": 6,
                "machine_image_id": 6,
                "updated_at": "2020-05-18T13:51:59.722367Z"
            },
            {
                "cloud_account_id": 3,
                "cloud_type": "azure",
                "content_object": {
                    "azure_instance_id": 3,
                    "created_at": "2020-05-18T13:51:59.722367Z",
                    "region": "South Central US",
                    "resource_id": "/subscriptions/223dc3f4-7b5a-4c49-ac5b-97f2e4a2da9e/resourceGroups/mouth/providers/Microsoft.Compute/virtualMachines/relate",
                    "updated_at": "2020-05-18T13:51:59.722367Z"
                },
                "created_at": "2020-05-18T13:51:59.722367Z",
                "instance_id": 7,
                "machine_image_id": 7,
                "updated_at": "2020-05-18T13:51:59.722367Z"
            }
        ],
        "links": {
            "first": "/api/cloudigrade/api/cloudigrade/v2/instances/?limit=10&offset=0&running_since=2020-05-18+13%3A51%3A59.722367%2B00%3A00",
            "last": "/api/cloudigrade/api/cloudigrade/v2/instances/?limit=10&offset=0&running_since=2020-05-18+13%3A51%3A59.722367%2B00%3A00",
            "next": null,
            "previous": null
        },
        "meta": {
            "count": 6
        }
    }


Machine Images
--------------

List all images
~~~~~~~~~~~~~~~

Below command will return all images that have been seen used by any instance for any account belonging to the user that makes the request.

Request:

.. code:: bash

    http localhost:8080/api/cloudigrade/v2/images/ "X-RH-IDENTITY:${HTTP_X_RH_IDENTITY}"

Response:

::

    HTTP/1.1 200 OK
    Allow: GET, HEAD, OPTIONS
    Content-Length: 6742
    Content-Type: application/json
    Vary: Accept
    X-CLOUDIGRADE-REQUEST-ID: ec15ef1a-6a10-496a-8627-bbf407ca726e
    X-Content-Type-Options: nosniff
    X-Frame-Options: DENY

    {
        "data": [
            {
                "architecture": "x86_64",
                "cloud_type": "aws",
                "content_object": {
                    "aws_image_id": 2,
                    "created_at": "2020-05-18T13:51:59.722367Z",
                    "ec2_ami_id": "ami-12c876d8",
                    "id": 2,
                    "is_cloud_access": false,
                    "is_marketplace": false,
                    "owner_aws_account_id": "636708824399",
                    "platform": "none",
                    "region": null,
                    "updated_at": "2020-05-18T13:51:59.722367Z"
                },
                "created_at": "2020-05-18T13:51:59.722367Z",
                "image_id": 2,
                "inspection_json": "{\"rhel_enabled_repos_found\": true, \"rhel_version\": \"7.7\", \"syspurpose\": {\"role\": \"Red Hat Enterprise Linux Server\", \"service_level_agreement\": \"Premium\", \"usage\": \"Development/Test\"}}",
                "is_encrypted": false,
                "name": null,
                "openshift": false,
                "openshift_detected": false,
                "rhel": true,
                "rhel_detected": true,
                "rhel_detected_by_tag": false,
                "rhel_enabled_repos_found": true,
                "rhel_product_certs_found": false,
                "rhel_release_files_found": false,
                "rhel_signed_packages_found": false,
                "rhel_version": "7.7",
                "status": "inspected",
                "syspurpose": {
                    "role": "Red Hat Enterprise Linux Server",
                    "service_level_agreement": "Premium",
                    "usage": "Development/Test"
                },
                "updated_at": "2020-05-18T13:51:59.722367Z"
            },
            {
                "architecture": "x86_64",
                "cloud_type": "aws",
                "content_object": {
                    "aws_image_id": 3,
                    "created_at": "2020-05-18T13:51:59.722367Z",
                    "ec2_ami_id": "ami-13471203",
                    "id": 3,
                    "is_cloud_access": false,
                    "is_marketplace": false,
                    "owner_aws_account_id": "636708824399",
                    "platform": "none",
                    "region": null,
                    "updated_at": "2020-05-18T13:51:59.722367Z"
                },
                "created_at": "2020-05-18T13:51:59.722367Z",
                "image_id": 3,
                "inspection_json": "{\"rhel_enabled_repos_found\": true, \"rhel_version\": \"7.7\", \"syspurpose\": {\"role\": \"Red Hat Enterprise Linux Server\", \"service_level_agreement\": \"Premium\", \"usage\": \"Development/Test\"}}",
                "is_encrypted": false,
                "name": null,
                "openshift": false,
                "openshift_detected": false,
                "rhel": true,
                "rhel_detected": true,
                "rhel_detected_by_tag": false,
                "rhel_enabled_repos_found": true,
                "rhel_product_certs_found": false,
                "rhel_release_files_found": false,
                "rhel_signed_packages_found": false,
                "rhel_version": "7.7",
                "status": "inspected",
                "syspurpose": {
                    "role": "Red Hat Enterprise Linux Server",
                    "service_level_agreement": "Premium",
                    "usage": "Development/Test"
                },
                "updated_at": "2020-05-18T13:51:59.722367Z"
            },
            {
                "architecture": "x86_64",
                "cloud_type": "aws",
                "content_object": {
                    "aws_image_id": 4,
                    "created_at": "2020-05-18T13:51:59.722367Z",
                    "ec2_ami_id": "ami-2729bd51",
                    "id": 4,
                    "is_cloud_access": false,
                    "is_marketplace": false,
                    "owner_aws_account_id": "636708824399",
                    "platform": "none",
                    "region": null,
                    "updated_at": "2020-05-18T13:51:59.722367Z"
                },
                "created_at": "2020-05-18T13:51:59.722367Z",
                "image_id": 4,
                "inspection_json": "{\"rhel_enabled_repos_found\": true, \"rhel_version\": \"7.7\", \"syspurpose\": {\"role\": \"Red Hat Enterprise Linux Server\", \"service_level_agreement\": \"Premium\", \"usage\": \"Development/Test\"}}",
                "is_encrypted": false,
                "name": null,
                "openshift": false,
                "openshift_detected": false,
                "rhel": true,
                "rhel_detected": true,
                "rhel_detected_by_tag": false,
                "rhel_enabled_repos_found": true,
                "rhel_product_certs_found": false,
                "rhel_release_files_found": false,
                "rhel_signed_packages_found": false,
                "rhel_version": "7.7",
                "status": "inspected",
                "syspurpose": {
                    "role": "Red Hat Enterprise Linux Server",
                    "service_level_agreement": "Premium",
                    "usage": "Development/Test"
                },
                "updated_at": "2020-05-18T13:51:59.722367Z"
            },
            {
                "architecture": "x86_64",
                "cloud_type": "azure",
                "content_object": {
                    "azure_image_id": 1,
                    "created_at": "2020-05-18T13:51:59.722367Z",
                    "id": 1,
                    "is_marketplace": false,
                    "region": null,
                    "resource_id": "/subscriptions/912bb2ac-34f7-440e-89ad-28d829578740/resourceGroups/despite/providers/Microsoft.Compute/images/cause",
                    "updated_at": "2020-05-18T13:51:59.722367Z"
                },
                "created_at": "2020-05-18T13:51:59.722367Z",
                "image_id": 5,
                "inspection_json": "{\"rhel_enabled_repos_found\": true, \"rhel_version\": \"7.7\", \"syspurpose\": {\"role\": \"Red Hat Enterprise Linux Server\", \"service_level_agreement\": \"Premium\", \"usage\": \"Development/Test\"}}",
                "is_encrypted": false,
                "name": null,
                "openshift": false,
                "openshift_detected": false,
                "rhel": true,
                "rhel_detected": true,
                "rhel_detected_by_tag": false,
                "rhel_enabled_repos_found": true,
                "rhel_product_certs_found": false,
                "rhel_release_files_found": false,
                "rhel_signed_packages_found": false,
                "rhel_version": "7.7",
                "status": "inspected",
                "syspurpose": {
                    "role": "Red Hat Enterprise Linux Server",
                    "service_level_agreement": "Premium",
                    "usage": "Development/Test"
                },
                "updated_at": "2020-05-18T13:51:59.722367Z"
            },
            {
                "architecture": "x86_64",
                "cloud_type": "azure",
                "content_object": {
                    "azure_image_id": 2,
                    "created_at": "2020-05-18T13:51:59.722367Z",
                    "id": 2,
                    "is_marketplace": false,
                    "region": null,
                    "resource_id": "/subscriptions/5b63d6a8-4027-4fb0-8375-bd1455bd0b8b/resourceGroups/son/providers/Microsoft.Compute/images/would",
                    "updated_at": "2020-05-18T13:51:59.722367Z"
                },
                "created_at": "2020-05-18T13:51:59.722367Z",
                "image_id": 6,
                "inspection_json": "{\"rhel_enabled_repos_found\": true, \"rhel_version\": \"7.7\", \"syspurpose\": {\"role\": \"Red Hat Enterprise Linux Server\", \"service_level_agreement\": \"Premium\", \"usage\": \"Development/Test\"}}",
                "is_encrypted": false,
                "name": null,
                "openshift": false,
                "openshift_detected": false,
                "rhel": true,
                "rhel_detected": true,
                "rhel_detected_by_tag": false,
                "rhel_enabled_repos_found": true,
                "rhel_product_certs_found": false,
                "rhel_release_files_found": false,
                "rhel_signed_packages_found": false,
                "rhel_version": "7.7",
                "status": "inspected",
                "syspurpose": {
                    "role": "Red Hat Enterprise Linux Server",
                    "service_level_agreement": "Premium",
                    "usage": "Development/Test"
                },
                "updated_at": "2020-05-18T13:51:59.722367Z"
            },
            {
                "architecture": "x86_64",
                "cloud_type": "azure",
                "content_object": {
                    "azure_image_id": 3,
                    "created_at": "2020-05-18T13:51:59.722367Z",
                    "id": 3,
                    "is_marketplace": false,
                    "region": null,
                    "resource_id": "/subscriptions/21b74f63-bf6a-44a6-9400-9831b255283d/resourceGroups/own/providers/Microsoft.Compute/images/chair",
                    "updated_at": "2020-05-18T13:51:59.722367Z"
                },
                "created_at": "2020-05-18T13:51:59.722367Z",
                "image_id": 7,
                "inspection_json": "{\"rhel_enabled_repos_found\": true, \"rhel_version\": \"7.7\", \"syspurpose\": {\"role\": \"Red Hat Enterprise Linux Server\", \"service_level_agreement\": \"Premium\", \"usage\": \"Development/Test\"}}",
                "is_encrypted": false,
                "name": null,
                "openshift": false,
                "openshift_detected": false,
                "rhel": true,
                "rhel_detected": true,
                "rhel_detected_by_tag": false,
                "rhel_enabled_repos_found": true,
                "rhel_product_certs_found": false,
                "rhel_release_files_found": false,
                "rhel_signed_packages_found": false,
                "rhel_version": "7.7",
                "status": "inspected",
                "syspurpose": {
                    "role": "Red Hat Enterprise Linux Server",
                    "service_level_agreement": "Premium",
                    "usage": "Development/Test"
                },
                "updated_at": "2020-05-18T13:51:59.722367Z"
            }
        ],
        "links": {
            "first": "/api/cloudigrade/api/cloudigrade/v2/images/?limit=10&offset=0",
            "last": "/api/cloudigrade/api/cloudigrade/v2/images/?limit=10&offset=0",
            "next": null,
            "previous": null
        },
        "meta": {
            "count": 6
        }
    }

When authenticating as a superuser, this will return all images used by instances in all accounts.

A superuser can also filter the images down to a those used by instances for accounts belonging to a specific user by using the optional
``user_id`` query string argument.

Request:

.. code:: bash

    http localhost:8080/api/cloudigrade/v2/images/ "X-RH-IDENTITY:${HTTP_X_RH_IDENTITY}" \
        user_id=="1"

Response:

::

    HTTP/1.1 200 OK
    Allow: GET, HEAD, OPTIONS
    Content-Length: 1004
    Content-Type: application/json
    Vary: Accept
    X-CLOUDIGRADE-REQUEST-ID: af6a077f-ebdd-4653-b840-145a121f5bb1
    X-Content-Type-Options: nosniff
    X-Frame-Options: DENY

    {
        "data": [
            {
                "architecture": "x86_64",
                "cloud_type": "aws",
                "content_object": {
                    "aws_image_id": 1,
                    "created_at": "2020-05-18T13:51:59.722367Z",
                    "ec2_ami_id": "ami-da6fe810",
                    "id": 1,
                    "is_cloud_access": false,
                    "is_marketplace": false,
                    "owner_aws_account_id": "544771852898",
                    "platform": "none",
                    "region": null,
                    "updated_at": "2020-05-18T13:51:59.722367Z"
                },
                "created_at": "2020-05-18T13:51:59.722367Z",
                "image_id": 1,
                "inspection_json": null,
                "is_encrypted": false,
                "name": null,
                "openshift": false,
                "openshift_detected": false,
                "rhel": false,
                "rhel_detected": false,
                "rhel_detected_by_tag": false,
                "rhel_enabled_repos_found": false,
                "rhel_product_certs_found": false,
                "rhel_release_files_found": false,
                "rhel_signed_packages_found": false,
                "rhel_version": null,
                "status": "pending",
                "syspurpose": null,
                "updated_at": "2020-05-18T13:51:59.722367Z"
            }
        ],
        "links": {
            "first": "/api/cloudigrade/api/cloudigrade/v2/images/?limit=10&offset=0&user_id=1",
            "last": "/api/cloudigrade/api/cloudigrade/v2/images/?limit=10&offset=0&user_id=1",
            "next": null,
            "previous": null
        },
        "meta": {
            "count": 1
        }
    }


Retrieve a specific image
~~~~~~~~~~~~~~~~~~~~~~~~~

Request:

.. code:: bash

    http localhost:8080/api/cloudigrade/v2/images/2/ "X-RH-IDENTITY:${HTTP_X_RH_IDENTITY}"

Response:

::

    HTTP/1.1 200 OK
    Allow: GET, HEAD, OPTIONS
    Content-Length: 1075
    Content-Type: application/json
    Vary: Accept
    X-CLOUDIGRADE-REQUEST-ID: 0758592d-02d4-493b-915d-1298e4243500
    X-Content-Type-Options: nosniff
    X-Frame-Options: DENY

    {
        "architecture": "x86_64",
        "cloud_type": "aws",
        "content_object": {
            "aws_image_id": 2,
            "created_at": "2020-05-18T13:51:59.722367Z",
            "ec2_ami_id": "ami-12c876d8",
            "id": 2,
            "is_cloud_access": false,
            "is_marketplace": false,
            "owner_aws_account_id": "636708824399",
            "platform": "none",
            "region": null,
            "updated_at": "2020-05-18T13:51:59.722367Z"
        },
        "created_at": "2020-05-18T13:51:59.722367Z",
        "image_id": 2,
        "inspection_json": "{\"rhel_enabled_repos_found\": true, \"rhel_version\": \"7.7\", \"syspurpose\": {\"role\": \"Red Hat Enterprise Linux Server\", \"service_level_agreement\": \"Premium\", \"usage\": \"Development/Test\"}}",
        "is_encrypted": false,
        "name": null,
        "openshift": false,
        "openshift_detected": false,
        "rhel": true,
        "rhel_detected": true,
        "rhel_detected_by_tag": false,
        "rhel_enabled_repos_found": true,
        "rhel_product_certs_found": false,
        "rhel_release_files_found": false,
        "rhel_signed_packages_found": false,
        "rhel_version": "7.7",
        "status": "inspected",
        "syspurpose": {
            "role": "Red Hat Enterprise Linux Server",
            "service_level_agreement": "Premium",
            "usage": "Development/Test"
        },
        "updated_at": "2020-05-18T13:51:59.722367Z"
    }


Reinspect a specific image
~~~~~~~~~~~~~~~~~~~~~~~~~~
cloudigrade/account/v2/serializers.py
Restart image inspection to deal with failed inspections or repeat inspection for the sake of testing.

Note that this command is only accessible by superusers.

Request:

.. code:: bash

    http post localhost:8080/api/cloudigrade/v2/images/2/reinspect/ "X-RH-IDENTITY:${HTTP_X_RH_IDENTITY}"

Response:

::

    HTTP/1.1 200 OK
    Allow: POST, OPTIONS
    Content-Length: 1073
    Content-Type: application/json
    Vary: Accept
    X-CLOUDIGRADE-REQUEST-ID: 34a8acbb-f0e6-4fbf-814b-5eb006ee9a3b
    X-Content-Type-Options: nosniff
    X-Frame-Options: DENY

    {
        "architecture": "x86_64",
        "cloud_type": "aws",
        "content_object": {
            "aws_image_id": 2,
            "created_at": "2020-05-18T13:51:59.722367Z",
            "ec2_ami_id": "ami-12c876d8",
            "id": 2,
            "is_cloud_access": false,
            "is_marketplace": false,
            "owner_aws_account_id": "636708824399",
            "platform": "none",
            "region": null,
            "updated_at": "2020-05-18T13:51:59.722367Z"
        },
        "created_at": "2020-05-18T13:51:59.722367Z",
        "image_id": 2,
        "inspection_json": "{\"rhel_enabled_repos_found\": true, \"rhel_version\": \"7.7\", \"syspurpose\": {\"role\": \"Red Hat Enterprise Linux Server\", \"service_level_agreement\": \"Premium\", \"usage\": \"Development/Test\"}}",
        "is_encrypted": false,
        "name": null,
        "openshift": false,
        "openshift_detected": false,
        "rhel": true,
        "rhel_detected": true,
        "rhel_detected_by_tag": false,
        "rhel_enabled_repos_found": true,
        "rhel_product_certs_found": false,
        "rhel_release_files_found": false,
        "rhel_signed_packages_found": false,
        "rhel_version": "7.7",
        "status": "pending",
        "syspurpose": {
            "role": "Red Hat Enterprise Linux Server",
            "service_level_agreement": "Premium",
            "usage": "Development/Test"
        },
        "updated_at": "2020-05-18T13:51:59.722367Z"
    }


Report Commands
---------------

These APIs may be used to generate calculated and aggregated report data.

Daily Max Concurrency
~~~~~~~~~~~~~~~~~~~~~

The concurrency API returns a paginated list of days, and each day includes the
maximum concurrent number of instances, grouped by various combinations of role,
sla, and architecture seen concurrently in use during that day.

Optional ``start_date`` is an ISO-8601 date that is the inclusive start of the
reporting period. If not defined, default is "today".

Optional ``end_date`` is an ISO-8601 date that is the exclusive end of the
reporting period. If not defined, default is "tomorrow".

Request:

.. code:: bash

    http localhost:8080/api/cloudigrade/v2/concurrent/ "X-RH-IDENTITY:${HTTP_X_RH_IDENTITY}" \
        start_date=="2020-05-11"

Response:

::

    HTTP/1.1 200 OK
    Allow: GET, HEAD, OPTIONS
    Content-Length: 19939
    Content-Type: application/json
    Vary: Accept
    X-CLOUDIGRADE-REQUEST-ID: db242f74-1c7a-48b5-b542-2107f7355c55
    X-Content-Type-Options: nosniff
    X-Frame-Options: DENY

    {
        "data": [
            {
                "date": "2020-05-11",
                "maximum_counts": [
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "_ANY",
                        "sla": "_ANY",
                        "usage": "_ANY"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "",
                        "sla": "_ANY",
                        "usage": "_ANY"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "_ANY",
                        "sla": "_ANY",
                        "usage": "Development/Test"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "",
                        "sla": "_ANY",
                        "usage": "Development/Test"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "_ANY",
                        "sla": "Premium",
                        "usage": "_ANY"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "",
                        "sla": "Premium",
                        "usage": "_ANY"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "_ANY",
                        "sla": "Premium",
                        "usage": "Development/Test"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "",
                        "sla": "Premium",
                        "usage": "Development/Test"
                    },
                    {
                        "arch": "x86_64",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "_ANY",
                        "sla": "_ANY",
                        "usage": "_ANY"
                    },
                    {
                        "arch": "x86_64",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "",
                        "sla": "_ANY",
                        "usage": "_ANY"
                    },
                    {
                        "arch": "x86_64",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "_ANY",
                        "sla": "_ANY",
                        "usage": "Development/Test"
                    },
                    {
                        "arch": "x86_64",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "",
                        "sla": "_ANY",
                        "usage": "Development/Test"
                    },
                    {
                        "arch": "x86_64",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "_ANY",
                        "sla": "Premium",
                        "usage": "_ANY"
                    },
                    {
                        "arch": "x86_64",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "",
                        "sla": "Premium",
                        "usage": "_ANY"
                    },
                    {
                        "arch": "x86_64",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "_ANY",
                        "sla": "Premium",
                        "usage": "Development/Test"
                    },
                    {
                        "arch": "x86_64",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "",
                        "sla": "Premium",
                        "usage": "Development/Test"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "Red Hat Enterprise Linux Server",
                        "service_type": "_ANY",
                        "sla": "_ANY",
                        "usage": "_ANY"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "Red Hat Enterprise Linux Server",
                        "service_type": "",
                        "sla": "_ANY",
                        "usage": "_ANY"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "Red Hat Enterprise Linux Server",
                        "service_type": "_ANY",
                        "sla": "_ANY",
                        "usage": "Development/Test"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "Red Hat Enterprise Linux Server",
                        "service_type": "",
                        "sla": "_ANY",
                        "usage": "Development/Test"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "Red Hat Enterprise Linux Server",
                        "service_type": "_ANY",
                        "sla": "Premium",
                        "usage": "_ANY"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "Red Hat Enterprise Linux Server",
                        "service_type": "",
                        "sla": "Premium",
                        "usage": "_ANY"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "Red Hat Enterprise Linux Server",
                        "service_type": "_ANY",
                        "sla": "Premium",
                        "usage": "Development/Test"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "Red Hat Enterprise Linux Server",
                        "service_type": "",
                        "sla": "Premium",
                        "usage": "Development/Test"
                    }
                ]
            },
            {
                "date": "2020-05-12",
                "maximum_counts": [
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "_ANY",
                        "sla": "_ANY",
                        "usage": "_ANY"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "",
                        "sla": "_ANY",
                        "usage": "_ANY"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "_ANY",
                        "sla": "_ANY",
                        "usage": "Development/Test"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "",
                        "sla": "_ANY",
                        "usage": "Development/Test"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "_ANY",
                        "sla": "Premium",
                        "usage": "_ANY"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "",
                        "sla": "Premium",
                        "usage": "_ANY"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "_ANY",
                        "sla": "Premium",
                        "usage": "Development/Test"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "",
                        "sla": "Premium",
                        "usage": "Development/Test"
                    },
                    {
                        "arch": "x86_64",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "_ANY",
                        "sla": "_ANY",
                        "usage": "_ANY"
                    },
                    {
                        "arch": "x86_64",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "",
                        "sla": "_ANY",
                        "usage": "_ANY"
                    },
                    {
                        "arch": "x86_64",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "_ANY",
                        "sla": "_ANY",
                        "usage": "Development/Test"
                    },
                    {
                        "arch": "x86_64",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "",
                        "sla": "_ANY",
                        "usage": "Development/Test"
                    },
                    {
                        "arch": "x86_64",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "_ANY",
                        "sla": "Premium",
                        "usage": "_ANY"
                    },
                    {
                        "arch": "x86_64",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "",
                        "sla": "Premium",
                        "usage": "_ANY"
                    },
                    {
                        "arch": "x86_64",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "_ANY",
                        "sla": "Premium",
                        "usage": "Development/Test"
                    },
                    {
                        "arch": "x86_64",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "",
                        "sla": "Premium",
                        "usage": "Development/Test"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "Red Hat Enterprise Linux Server",
                        "service_type": "_ANY",
                        "sla": "_ANY",
                        "usage": "_ANY"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "Red Hat Enterprise Linux Server",
                        "service_type": "",
                        "sla": "_ANY",
                        "usage": "_ANY"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "Red Hat Enterprise Linux Server",
                        "service_type": "_ANY",
                        "sla": "_ANY",
                        "usage": "Development/Test"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "Red Hat Enterprise Linux Server",
                        "service_type": "",
                        "sla": "_ANY",
                        "usage": "Development/Test"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "Red Hat Enterprise Linux Server",
                        "service_type": "_ANY",
                        "sla": "Premium",
                        "usage": "_ANY"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "Red Hat Enterprise Linux Server",
                        "service_type": "",
                        "sla": "Premium",
                        "usage": "_ANY"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "Red Hat Enterprise Linux Server",
                        "service_type": "_ANY",
                        "sla": "Premium",
                        "usage": "Development/Test"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "Red Hat Enterprise Linux Server",
                        "service_type": "",
                        "sla": "Premium",
                        "usage": "Development/Test"
                    }
                ]
            },
            {
                "date": "2020-05-13",
                "maximum_counts": [
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "_ANY",
                        "sla": "_ANY",
                        "usage": "_ANY"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "",
                        "sla": "_ANY",
                        "usage": "_ANY"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "_ANY",
                        "sla": "_ANY",
                        "usage": "Development/Test"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "",
                        "sla": "_ANY",
                        "usage": "Development/Test"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "_ANY",
                        "sla": "Premium",
                        "usage": "_ANY"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "",
                        "sla": "Premium",
                        "usage": "_ANY"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "_ANY",
                        "sla": "Premium",
                        "usage": "Development/Test"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "",
                        "sla": "Premium",
                        "usage": "Development/Test"
                    },
                    {
                        "arch": "x86_64",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "_ANY",
                        "sla": "_ANY",
                        "usage": "_ANY"
                    },
                    {
                        "arch": "x86_64",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "",
                        "sla": "_ANY",
                        "usage": "_ANY"
                    },
                    {
                        "arch": "x86_64",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "_ANY",
                        "sla": "_ANY",
                        "usage": "Development/Test"
                    },
                    {
                        "arch": "x86_64",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "",
                        "sla": "_ANY",
                        "usage": "Development/Test"
                    },
                    {
                        "arch": "x86_64",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "_ANY",
                        "sla": "Premium",
                        "usage": "_ANY"
                    },
                    {
                        "arch": "x86_64",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "",
                        "sla": "Premium",
                        "usage": "_ANY"
                    },
                    {
                        "arch": "x86_64",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "_ANY",
                        "sla": "Premium",
                        "usage": "Development/Test"
                    },
                    {
                        "arch": "x86_64",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "",
                        "sla": "Premium",
                        "usage": "Development/Test"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "Red Hat Enterprise Linux Server",
                        "service_type": "_ANY",
                        "sla": "_ANY",
                        "usage": "_ANY"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "Red Hat Enterprise Linux Server",
                        "service_type": "",
                        "sla": "_ANY",
                        "usage": "_ANY"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "Red Hat Enterprise Linux Server",
                        "service_type": "_ANY",
                        "sla": "_ANY",
                        "usage": "Development/Test"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "Red Hat Enterprise Linux Server",
                        "service_type": "",
                        "sla": "_ANY",
                        "usage": "Development/Test"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "Red Hat Enterprise Linux Server",
                        "service_type": "_ANY",
                        "sla": "Premium",
                        "usage": "_ANY"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "Red Hat Enterprise Linux Server",
                        "service_type": "",
                        "sla": "Premium",
                        "usage": "_ANY"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "Red Hat Enterprise Linux Server",
                        "service_type": "_ANY",
                        "sla": "Premium",
                        "usage": "Development/Test"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "Red Hat Enterprise Linux Server",
                        "service_type": "",
                        "sla": "Premium",
                        "usage": "Development/Test"
                    }
                ]
            },
            {
                "date": "2020-05-14",
                "maximum_counts": [
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "_ANY",
                        "sla": "_ANY",
                        "usage": "_ANY"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "",
                        "sla": "_ANY",
                        "usage": "_ANY"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "_ANY",
                        "sla": "_ANY",
                        "usage": "Development/Test"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "",
                        "sla": "_ANY",
                        "usage": "Development/Test"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "_ANY",
                        "sla": "Premium",
                        "usage": "_ANY"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "",
                        "sla": "Premium",
                        "usage": "_ANY"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "_ANY",
                        "sla": "Premium",
                        "usage": "Development/Test"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "",
                        "sla": "Premium",
                        "usage": "Development/Test"
                    },
                    {
                        "arch": "x86_64",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "_ANY",
                        "sla": "_ANY",
                        "usage": "_ANY"
                    },
                    {
                        "arch": "x86_64",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "",
                        "sla": "_ANY",
                        "usage": "_ANY"
                    },
                    {
                        "arch": "x86_64",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "_ANY",
                        "sla": "_ANY",
                        "usage": "Development/Test"
                    },
                    {
                        "arch": "x86_64",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "",
                        "sla": "_ANY",
                        "usage": "Development/Test"
                    },
                    {
                        "arch": "x86_64",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "_ANY",
                        "sla": "Premium",
                        "usage": "_ANY"
                    },
                    {
                        "arch": "x86_64",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "",
                        "sla": "Premium",
                        "usage": "_ANY"
                    },
                    {
                        "arch": "x86_64",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "_ANY",
                        "sla": "Premium",
                        "usage": "Development/Test"
                    },
                    {
                        "arch": "x86_64",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "",
                        "sla": "Premium",
                        "usage": "Development/Test"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "Red Hat Enterprise Linux Server",
                        "service_type": "_ANY",
                        "sla": "_ANY",
                        "usage": "_ANY"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "Red Hat Enterprise Linux Server",
                        "service_type": "",
                        "sla": "_ANY",
                        "usage": "_ANY"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "Red Hat Enterprise Linux Server",
                        "service_type": "_ANY",
                        "sla": "_ANY",
                        "usage": "Development/Test"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "Red Hat Enterprise Linux Server",
                        "service_type": "",
                        "sla": "_ANY",
                        "usage": "Development/Test"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "Red Hat Enterprise Linux Server",
                        "service_type": "_ANY",
                        "sla": "Premium",
                        "usage": "_ANY"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "Red Hat Enterprise Linux Server",
                        "service_type": "",
                        "sla": "Premium",
                        "usage": "_ANY"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "Red Hat Enterprise Linux Server",
                        "service_type": "_ANY",
                        "sla": "Premium",
                        "usage": "Development/Test"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "Red Hat Enterprise Linux Server",
                        "service_type": "",
                        "sla": "Premium",
                        "usage": "Development/Test"
                    }
                ]
            },
            {
                "date": "2020-05-15",
                "maximum_counts": [
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "_ANY",
                        "sla": "_ANY",
                        "usage": "_ANY"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "",
                        "sla": "_ANY",
                        "usage": "_ANY"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "_ANY",
                        "sla": "_ANY",
                        "usage": "Development/Test"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "",
                        "sla": "_ANY",
                        "usage": "Development/Test"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "_ANY",
                        "sla": "Premium",
                        "usage": "_ANY"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "",
                        "sla": "Premium",
                        "usage": "_ANY"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "_ANY",
                        "sla": "Premium",
                        "usage": "Development/Test"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "",
                        "sla": "Premium",
                        "usage": "Development/Test"
                    },
                    {
                        "arch": "x86_64",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "_ANY",
                        "sla": "_ANY",
                        "usage": "_ANY"
                    },
                    {
                        "arch": "x86_64",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "",
                        "sla": "_ANY",
                        "usage": "_ANY"
                    },
                    {
                        "arch": "x86_64",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "_ANY",
                        "sla": "_ANY",
                        "usage": "Development/Test"
                    },
                    {
                        "arch": "x86_64",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "",
                        "sla": "_ANY",
                        "usage": "Development/Test"
                    },
                    {
                        "arch": "x86_64",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "_ANY",
                        "sla": "Premium",
                        "usage": "_ANY"
                    },
                    {
                        "arch": "x86_64",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "",
                        "sla": "Premium",
                        "usage": "_ANY"
                    },
                    {
                        "arch": "x86_64",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "_ANY",
                        "sla": "Premium",
                        "usage": "Development/Test"
                    },
                    {
                        "arch": "x86_64",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "",
                        "sla": "Premium",
                        "usage": "Development/Test"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "Red Hat Enterprise Linux Server",
                        "service_type": "_ANY",
                        "sla": "_ANY",
                        "usage": "_ANY"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "Red Hat Enterprise Linux Server",
                        "service_type": "",
                        "sla": "_ANY",
                        "usage": "_ANY"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "Red Hat Enterprise Linux Server",
                        "service_type": "_ANY",
                        "sla": "_ANY",
                        "usage": "Development/Test"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "Red Hat Enterprise Linux Server",
                        "service_type": "",
                        "sla": "_ANY",
                        "usage": "Development/Test"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "Red Hat Enterprise Linux Server",
                        "service_type": "_ANY",
                        "sla": "Premium",
                        "usage": "_ANY"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "Red Hat Enterprise Linux Server",
                        "service_type": "",
                        "sla": "Premium",
                        "usage": "_ANY"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "Red Hat Enterprise Linux Server",
                        "service_type": "_ANY",
                        "sla": "Premium",
                        "usage": "Development/Test"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "Red Hat Enterprise Linux Server",
                        "service_type": "",
                        "sla": "Premium",
                        "usage": "Development/Test"
                    }
                ]
            },
            {
                "date": "2020-05-16",
                "maximum_counts": []
            },
            {
                "date": "2020-05-17",
                "maximum_counts": [
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "_ANY",
                        "sla": "_ANY",
                        "usage": "_ANY"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "",
                        "sla": "_ANY",
                        "usage": "_ANY"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "_ANY",
                        "sla": "_ANY",
                        "usage": "Development/Test"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "",
                        "sla": "_ANY",
                        "usage": "Development/Test"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "_ANY",
                        "sla": "Premium",
                        "usage": "_ANY"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "",
                        "sla": "Premium",
                        "usage": "_ANY"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "_ANY",
                        "sla": "Premium",
                        "usage": "Development/Test"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "",
                        "sla": "Premium",
                        "usage": "Development/Test"
                    },
                    {
                        "arch": "x86_64",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "_ANY",
                        "sla": "_ANY",
                        "usage": "_ANY"
                    },
                    {
                        "arch": "x86_64",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "",
                        "sla": "_ANY",
                        "usage": "_ANY"
                    },
                    {
                        "arch": "x86_64",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "_ANY",
                        "sla": "_ANY",
                        "usage": "Development/Test"
                    },
                    {
                        "arch": "x86_64",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "",
                        "sla": "_ANY",
                        "usage": "Development/Test"
                    },
                    {
                        "arch": "x86_64",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "_ANY",
                        "sla": "Premium",
                        "usage": "_ANY"
                    },
                    {
                        "arch": "x86_64",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "",
                        "sla": "Premium",
                        "usage": "_ANY"
                    },
                    {
                        "arch": "x86_64",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "_ANY",
                        "sla": "Premium",
                        "usage": "Development/Test"
                    },
                    {
                        "arch": "x86_64",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "",
                        "sla": "Premium",
                        "usage": "Development/Test"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "Red Hat Enterprise Linux Server",
                        "service_type": "_ANY",
                        "sla": "_ANY",
                        "usage": "_ANY"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "Red Hat Enterprise Linux Server",
                        "service_type": "",
                        "sla": "_ANY",
                        "usage": "_ANY"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "Red Hat Enterprise Linux Server",
                        "service_type": "_ANY",
                        "sla": "_ANY",
                        "usage": "Development/Test"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "Red Hat Enterprise Linux Server",
                        "service_type": "",
                        "sla": "_ANY",
                        "usage": "Development/Test"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "Red Hat Enterprise Linux Server",
                        "service_type": "_ANY",
                        "sla": "Premium",
                        "usage": "_ANY"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "Red Hat Enterprise Linux Server",
                        "service_type": "",
                        "sla": "Premium",
                        "usage": "_ANY"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "Red Hat Enterprise Linux Server",
                        "service_type": "_ANY",
                        "sla": "Premium",
                        "usage": "Development/Test"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "Red Hat Enterprise Linux Server",
                        "service_type": "",
                        "sla": "Premium",
                        "usage": "Development/Test"
                    }
                ]
            },
            {
                "date": "2020-05-18",
                "maximum_counts": [
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "_ANY",
                        "sla": "_ANY",
                        "usage": "_ANY"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "",
                        "sla": "_ANY",
                        "usage": "_ANY"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "_ANY",
                        "sla": "_ANY",
                        "usage": "Development/Test"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "",
                        "sla": "_ANY",
                        "usage": "Development/Test"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "_ANY",
                        "sla": "Premium",
                        "usage": "_ANY"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "",
                        "sla": "Premium",
                        "usage": "_ANY"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "_ANY",
                        "sla": "Premium",
                        "usage": "Development/Test"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "",
                        "sla": "Premium",
                        "usage": "Development/Test"
                    },
                    {
                        "arch": "x86_64",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "_ANY",
                        "sla": "_ANY",
                        "usage": "_ANY"
                    },
                    {
                        "arch": "x86_64",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "",
                        "sla": "_ANY",
                        "usage": "_ANY"
                    },
                    {
                        "arch": "x86_64",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "_ANY",
                        "sla": "_ANY",
                        "usage": "Development/Test"
                    },
                    {
                        "arch": "x86_64",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "",
                        "sla": "_ANY",
                        "usage": "Development/Test"
                    },
                    {
                        "arch": "x86_64",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "_ANY",
                        "sla": "Premium",
                        "usage": "_ANY"
                    },
                    {
                        "arch": "x86_64",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "",
                        "sla": "Premium",
                        "usage": "_ANY"
                    },
                    {
                        "arch": "x86_64",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "_ANY",
                        "sla": "Premium",
                        "usage": "Development/Test"
                    },
                    {
                        "arch": "x86_64",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "",
                        "sla": "Premium",
                        "usage": "Development/Test"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "Red Hat Enterprise Linux Server",
                        "service_type": "_ANY",
                        "sla": "_ANY",
                        "usage": "_ANY"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "Red Hat Enterprise Linux Server",
                        "service_type": "",
                        "sla": "_ANY",
                        "usage": "_ANY"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "Red Hat Enterprise Linux Server",
                        "service_type": "_ANY",
                        "sla": "_ANY",
                        "usage": "Development/Test"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "Red Hat Enterprise Linux Server",
                        "service_type": "",
                        "sla": "_ANY",
                        "usage": "Development/Test"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "Red Hat Enterprise Linux Server",
                        "service_type": "_ANY",
                        "sla": "Premium",
                        "usage": "_ANY"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "Red Hat Enterprise Linux Server",
                        "service_type": "",
                        "sla": "Premium",
                        "usage": "_ANY"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "Red Hat Enterprise Linux Server",
                        "service_type": "_ANY",
                        "sla": "Premium",
                        "usage": "Development/Test"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "Red Hat Enterprise Linux Server",
                        "service_type": "",
                        "sla": "Premium",
                        "usage": "Development/Test"
                    }
                ]
            }
        ],
        "links": {
            "first": "/api/cloudigrade/api/cloudigrade/v2/concurrent/?limit=10&offset=0&start_date=2020-05-11",
            "last": "/api/cloudigrade/api/cloudigrade/v2/concurrent/?limit=10&offset=0&start_date=2020-05-11",
            "next": null,
            "previous": null
        },
        "meta": {
            "count": 8
        }
    }

If your requested ``start_date`` and ``end_date`` values would result in some
future dates beyond "today", those future dates will not be included. Daily
max concurrency results will end "today" at the latest. In the following
example, the request is for dates "today" through "one week from today".
This means only one day ("today") is included in the response data.

Request:

.. code:: bash

    http localhost:8080/api/cloudigrade/v2/concurrent/ "X-RH-IDENTITY:${HTTP_X_RH_IDENTITY}" \
        start_date=="2020-05-18" \
        end_date=="2020-05-25"

Response:

::

    HTTP/1.1 200 OK
    Allow: GET, HEAD, OPTIONS
    Content-Length: 3107
    Content-Type: application/json
    Vary: Accept
    X-CLOUDIGRADE-REQUEST-ID: 79f54a4b-efe0-458d-a253-2f97fe141a88
    X-Content-Type-Options: nosniff
    X-Frame-Options: DENY

    {
        "data": [
            {
                "date": "2020-05-18",
                "maximum_counts": [
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "_ANY",
                        "sla": "_ANY",
                        "usage": "_ANY"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "",
                        "sla": "_ANY",
                        "usage": "_ANY"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "_ANY",
                        "sla": "_ANY",
                        "usage": "Development/Test"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "",
                        "sla": "_ANY",
                        "usage": "Development/Test"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "_ANY",
                        "sla": "Premium",
                        "usage": "_ANY"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "",
                        "sla": "Premium",
                        "usage": "_ANY"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "_ANY",
                        "sla": "Premium",
                        "usage": "Development/Test"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "",
                        "sla": "Premium",
                        "usage": "Development/Test"
                    },
                    {
                        "arch": "x86_64",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "_ANY",
                        "sla": "_ANY",
                        "usage": "_ANY"
                    },
                    {
                        "arch": "x86_64",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "",
                        "sla": "_ANY",
                        "usage": "_ANY"
                    },
                    {
                        "arch": "x86_64",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "_ANY",
                        "sla": "_ANY",
                        "usage": "Development/Test"
                    },
                    {
                        "arch": "x86_64",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "",
                        "sla": "_ANY",
                        "usage": "Development/Test"
                    },
                    {
                        "arch": "x86_64",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "_ANY",
                        "sla": "Premium",
                        "usage": "_ANY"
                    },
                    {
                        "arch": "x86_64",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "",
                        "sla": "Premium",
                        "usage": "_ANY"
                    },
                    {
                        "arch": "x86_64",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "_ANY",
                        "sla": "Premium",
                        "usage": "Development/Test"
                    },
                    {
                        "arch": "x86_64",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "",
                        "sla": "Premium",
                        "usage": "Development/Test"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "Red Hat Enterprise Linux Server",
                        "service_type": "_ANY",
                        "sla": "_ANY",
                        "usage": "_ANY"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "Red Hat Enterprise Linux Server",
                        "service_type": "",
                        "sla": "_ANY",
                        "usage": "_ANY"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "Red Hat Enterprise Linux Server",
                        "service_type": "_ANY",
                        "sla": "_ANY",
                        "usage": "Development/Test"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "Red Hat Enterprise Linux Server",
                        "service_type": "",
                        "sla": "_ANY",
                        "usage": "Development/Test"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "Red Hat Enterprise Linux Server",
                        "service_type": "_ANY",
                        "sla": "Premium",
                        "usage": "_ANY"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "Red Hat Enterprise Linux Server",
                        "service_type": "",
                        "sla": "Premium",
                        "usage": "_ANY"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "Red Hat Enterprise Linux Server",
                        "service_type": "_ANY",
                        "sla": "Premium",
                        "usage": "Development/Test"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "Red Hat Enterprise Linux Server",
                        "service_type": "",
                        "sla": "Premium",
                        "usage": "Development/Test"
                    }
                ]
            }
        ],
        "links": {
            "first": "/api/cloudigrade/api/cloudigrade/v2/concurrent/?end_date=2020-05-25&limit=10&offset=0&start_date=2020-05-18",
            "last": "/api/cloudigrade/api/cloudigrade/v2/concurrent/?end_date=2020-05-25&limit=10&offset=0&start_date=2020-05-18",
            "next": null,
            "previous": null
        },
        "meta": {
            "count": 1
        }
    }

If your requested ``start_date`` and ``end_date`` values would result in exclusively
future dates beyond "today", since those future dates will not be included, zero days
will be included in the response data. In the following example, the request is for
dates "tomorrow" through "one week from today".

Request:

.. code:: bash

    http localhost:8080/api/cloudigrade/v2/concurrent/ "X-RH-IDENTITY:${HTTP_X_RH_IDENTITY}" \
        start_date=="2020-05-19" \
        end_date=="2020-05-25"

Response:

::

    HTTP/1.1 200 OK
    Allow: GET, HEAD, OPTIONS
    Content-Length: 303
    Content-Type: application/json
    Vary: Accept
    X-CLOUDIGRADE-REQUEST-ID: 944e2860-e525-4220-8d39-50823e3cc12f
    X-Content-Type-Options: nosniff
    X-Frame-Options: DENY

    {
        "data": [],
        "links": {
            "first": "/api/cloudigrade/api/cloudigrade/v2/concurrent/?end_date=2020-05-25&limit=10&offset=0&start_date=2020-05-19",
            "last": "/api/cloudigrade/api/cloudigrade/v2/concurrent/?end_date=2020-05-25&limit=10&offset=0&start_date=2020-05-19",
            "next": null,
            "previous": null
        },
        "meta": {
            "count": 0
        }
    }

Miscellaneous Commands
----------------------

Retrieve current publicly-viewable system configuration
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

The sysconfig endpoint includes the AWS cloud account id used by the application, AWS policies used for acting on behalf of customers, and the currently deployed backend version.

Request:

.. code:: bash

    http localhost:8080/api/cloudigrade/v2/sysconfig/ "X-RH-IDENTITY:${HTTP_X_RH_IDENTITY}"

Response:

::

    HTTP/1.1 200 OK
    Allow: GET, HEAD, OPTIONS
    Content-Length: 608
    Content-Type: application/json
    Vary: Accept
    X-CLOUDIGRADE-REQUEST-ID: 4a5f6ba9-0bdc-4199-8564-13b312216b4c
    X-Content-Type-Options: nosniff
    X-Frame-Options: DENY

    {
        "aws_account_id": 988212965548,
        "aws_policies": {
            "traditional_inspection": {
                "Statement": [
                    {
                        "Action": [
                            "ec2:DescribeImages",
                            "ec2:DescribeInstances",
                            "ec2:ModifySnapshotAttribute",
                            "ec2:DescribeSnapshotAttribute",
                            "ec2:DescribeSnapshots",
                            "ec2:CopyImage",
                            "ec2:CreateTags",
                            "ec2:DescribeRegions",
                            "cloudtrail:CreateTrail",
                            "cloudtrail:UpdateTrail",
                            "cloudtrail:PutEventSelectors",
                            "cloudtrail:DescribeTrails",
                            "cloudtrail:StartLogging",
                            "cloudtrail:DeleteTrail"
                        ],
                        "Effect": "Allow",
                        "Resource": "*",
                        "Sid": "CloudigradePolicy"
                    }
                ],
                "Version": "2012-10-17"
            }
        },
        "version": "489-cloudigrade-version - d2b30c637ce3788e22990b21434bac2edcfb7ede"
    }
